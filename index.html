<!DOCTYPE html>
<html lang="en">

<head>
    <style>
        .parent {
            position: relative;
            top: 0;
            left: 0;
        }

        .image1 {
            position: relative;
            top: 0;
            left: 0;
        }

        .image2 {
            position: absolute;
            top: 0px;
            left: 0px;
        }
    </style>
</head>
<body onload="load()">
    <div class="parent">
        <img id="texture" title="r" class="image2" src="" width="2042" height="502" />
        <img id="guitar" title="r" class="image1" src="guitar.png" width="2042" height="502" />
    </div>
    <br>
    Click a WilsonArt laminate to see a preview.
    <br>
    <div id="clicked">&nbsp;</div>
    <br>
</body>

</html>
<script>
    var hplImages = [
        "10657-60 Graphite.jpg",
        "10734-60_Limber Maple.jpg",
        "10745-60_Fonthill Pear.jpg",
        "10776-60_Kensington Maple.jpg",
        "13088-60 Dragon Fire.jpg",
        "13089-60 Sunny Side Up.jpg",
        "13091-60 Nori.jpg",
        "13092-60 Catalina.jpg",
        "13096-60 Candy Apple.jpg",
        "13102-60 Gumball.jpg",
        "1500.jpg",
        "1530.jpg",
        "1570-60_White.jpg",
        "1572-60_Antique White.jpg",
        "1573-60_Frosty White.jpg",
        "1595-60_Black.jpg",
        "17000K - Ashbee Oak.jpg",
        "17001.jpg",
        "17002.jpg",
        "17003K - Stickley Oak.jpg",
        "17004K - Carter Oak.jpg",
        "17005K - Morris Oak.jpg",
        "17012.jpg",
        "17013.jpg",
        "17015K Raleigh Walnut.jpg",
        "17016K Cumberland Walnut.jpg",
        "17017K Hartley Walnut.jpg",
        "17018K Solano Walnut.jpg",
        "1799.jpg",
        "1814K-35_Deepstar Bronze.jpg",
        "1815K-35_Deepstar Agate.jpg",
        "1818_9.jpg",
        "1820K-35_Bella Noche.jpg",
        "1822K-35_Bella Capri.jpg",
        "1824K-35_Sedona Bluff.jpg",
        "1826K-35_Sedona Trail.jpg",
        "1832K-35_River Gemstone.jpg",
        "1842K-45_Canyon Passage.jpg",
        "1849K-35_Luna Frost.jpg",
        "1850.jpg",
        "1854K-35_Luna Night.jpg",
        "1858K-55_Silver Travertine.jpg",
        "1863K-55_Bainbrook Grey.jpg",
        "1864K-55_Salentina Nero.jpg",
        "1867_4.jpg",
        "1870_9.jpg",
        "1871K-35_Golden Romano.jpg",
        "1872K-35_Bianco Romano.jpg",
        "1874K-35_Winter Carnival.jpg",
        "1875K-35_Summer Carnival.jpg",
        "1876K-35_Spring Carnival.jpg",
        "1877_9.jpg",
        "1878K-Granito-Amarelo-Download.jpg",
        "1879K-Trinedad-Lapidus-Download.jpg",
        "1880K-Magnata-Download.jpg",
        "1881.jpg",
        "1884.jpg",
        "1886.jpg",
        "1887.jpg",
        "1888.jpg",
        "1889.jpg",
        "1890.jpg",
        "1891.jpg",
        "2932-60_Almond Leather.jpg",
        "4142 grey-glace_2400x1500.jpg",
        "4143_neutral-glace_2400_x_1500.jpg",
        "4168.jpg",
        "4170-60_Beige Pampas.jpg",
        "4588.jpg",
        "4589.jpg",
        "4595K-52_Bahia Granite.jpg",
        "4622-60_Grey Nebula.jpg",
        "4623-60_Graphite Nebula.jpg",
        "4630-60_Cloud Nebula.jpg",
        "4651-60_Navy Legacy.jpg",
        "4656-60_Bronze Legacy.jpg",
        "4667-60_Green Tigris.jpg",
        "4669-60_Natural Tigris.jpg",
        "4674-60_Evening Tigris.jpg",
        "4724.jpg",
        "4746-60_Woolamai Brush.jpg",
        "4762.jpg",
        "4779-60_Pewter Brush.jpg",
        "4783.jpg",
        "4795-60_Windswept Pewter.jpg",
        "4796-60_Burnished Chestnut.jpg",
        "4810-60_Titanium EV.jpg",
        "4811-60_Silicon EV.jpg",
        "4814-60_Tungsten EV.jpg",
        "4820-60_Carbon EV.jpg",
        "4823-60_Antique Brush.jpg",
        "4830K-18_Satin Stainless.jpg",
        "4835.jpg",
        "4841-60_Desert Zephyr.jpg",
        "4842-60_Canyon Zephyr.jpg",
        "4843-60_Misted Zephyr.jpg",
        "4844-60_Loden Zephyr.jpg",
        "4845-60_Twilight Zephyr.jpg",
        "4846-60_Morro Zephyr.jpg",
        "4856-60_Cloud Zephyr.jpg",
        "4857-60_Shadow Zephyr.jpg",
        "4860K-07_Silver Alchemy.jpg",
        "4861K-07_Gold Alchemy.jpg",
        "4862K-07_Sandy Topaz.jpg",
        "4866.jpg",
        "4869-60_Western White.jpg",
        "4871-60_Western Suede.jpg",
        "4876-38_Sheer Mesh.jpg",
        "4877-38_Grey Mesh.jpg",
        "4878-38_Pewter Mesh.jpg",
        "4879-38_Steel Mesh.jpg",
        "4880-38_Carbon Mesh.jpg",
        "4882-38_Oiled Soapstone.jpg",
        "4883-38_Sable Soapstone.jpg",
        "4886-38_Pearl Soapstone.jpg",
        "4888-38_Rustic Slate.jpg",
        "4897.png",
        "4904.jpg",
        "4905.jpg",
        "4907.jpg",
        "4909-60_Ginseng Tea.jpg",
        "4921K-52_Madura Garnet.jpg",
        "4922K-52_Madura Pearl.jpg",
        "4923K-52_Madura Gold.jpg",
        "4924-38_White Carrara.jpg",
        "4925K-07_Calcutta Marble.jpg",
        "4926K-07_Black Alicante.jpg",
        "4929.jpg",
        "4939K-18_Vapor Strandz.jpg",
        "4940K-18_Astro Strandz.jpg",
        "4941K-18_Cosmic Strandz.jpg",
        "4942-38_Crisp Linen.jpg",
        "4943-38_Classic Linen.jpg",
        "4944-38_Casual Linen.jpg",
        "4945-38_Organic Cotton.jpg",
        "4946-38_Natural Cotton.jpg",
        "4947-38_Raw Cotton..jpg",
        "4948K-22_Breccia Nouvelle.jpg",
        "4951K-22_Breccia.jpg",
        "4952K-22_Typhoon Ice.jpg",
        "4953K-22_Typhoon Gold.jpg",
        "4954K-22_Italian White Di Pesco.jpg",
        "4955K-22_Cafe di Pesco.jpg",
        "4957K-22_Mocha Fantastico.jpg",
        "4965_7.jpg",
        "4971K_Bronzite-Download.jpg",
        "4978K-Henna-Vesta-Download.jpg",
        "4979K-Ink-Vesta-Download.jpg",
        "4980K-Portoro-Download.jpg",
        "4981.jpg",
        "4987.jpg",
        "4988.jpg",
        "4990-38-flax-linen-full-sheet.jpg",
        "4991-38-pressed-linen-full-sheet.jpg",
        "4992-38-tailored-linen-full-sheet.jpg",
        "4995-60-forged-steel-full-sheet.jpg",
        "4996-38-high-rise-full-sheet.jpg",
        "4998.jpg",
        "4999.jpg",
        "5000.jpg",
        "5001.jpg",
        "5002.jpg",
        "5003.jpg",
        "5004.jpg",
        "5005.jpg",
        "5006.jpg",
        "5008.jpg",
        "5009.jpg",
        "5010.jpg",
        "5011.jpg",
        "5012.jpg",
        "5013.jpg",
        "5014.jpg",
        "5015.jpg",
        "5016.jpg",
        "5017.jpg",
        "5018.jpg",
        "5022.jpg",
        "5023.jpg",
        "5024.jpg",
        "5033-38 Handspun Pearl.jpg",
        "5034-38 Handspun Dove.jpg",
        "5035-38 Handspun Slate.jpg",
        "5036-38 Handspun Chestnut.jpg",
        "5037-38 Anzio Marble.jpg",
        "5043-15 Lisola.jpg",
        "5045-15 Ice Mist.jpg",
        "5046 Lakeshore 5x8.jpg",
        "5057K-18 Pearl Alloy.jpg",
        "5058K-18 Titanium Alloy.jpg",
        "7039K-78_Windsor Mahogany.jpg",
        "7040K-78_Figured Mahogany.jpg",
        "7054-60_Wild Cherry.jpg",
        "7110K-78_Montana Walnut.jpg",
        "7122K-07_Empire Mahogany.jpg",
        "7209K-78_Nepal Teak.jpg",
        "7806-60_Bannister Oak.jpg",
        "7816-60_Solar Oak.jpg",
        "7850-60_Beigewood.jpg",
        "7909-60_Fusion Maple.jpg",
        "7911-60_Manitoba Maple.jpg",
        "7919K-78_Amber Cherry.jpg",
        "7921-38_Tuscan Walnut.jpg",
        "7922K-07_Brighton Walnut.jpg",
        "7923K-07_Versailles Anigre.jpg",
        "7924K-07_Biltmore Cherry.jpg",
        "7925-38_Monticello Maple.jpg",
        "7928-38_Castle Oak.jpg",
        "7929-38_Huntington Maple.jpg",
        "7933K-07_Cafelle.jpg",
        "7935K-07_Shaker Cherry.jpg",
        "7936K-07_Williamsburg Cherry.jpg",
        "7937-38_River Cherry.jpg",
        "7938-38_New Age Oak.jpg",
        "7939K-18_Blond Echo.jpg",
        "7941K-18_Tan Echo.jpg",
        "7942K-07_Cocobala.jpg",
        "7943K-07_Colombian Walnut.jpg",
        "7944K-01_Madagascar.jpg",
        "7945K-18_Xanadu.jpg",
        "7946-38_Brazilwood.jpg",
        "7947K-18_Rio.jpg",
        "7948K-07_Mambo.jpg",
        "7949K-18_Asian Night.jpg",
        "7951K-18_Asian Sun.jpg",
        "7952K-18_Asian Sand.jpg",
        "7953-38_Harvest Maple.jpg",
        "7954-38_Natural Rift.jpg",
        "7957-78_Zanzibar.jpg",
        "7959K-78_Hampton Walnut.jpg",
        "7960K-18_Studio Teak.jpg",
        "7964K-12_Skyline Walnut.jpg",
        "7965K-12_Walnut Heights.jpg",
        "7966K-12_5th Ave. Elm.jpg",
        "7967K-12_Park Elm.jpg",
        "7968K-12_Loft Oak.jpg",
        "7969K-12_Warehouse Oak.jpg",
        "7970K-18_High Line.jpg",
        "7971K-12_Uptown Walnut.jpg",
        "7972K-12_Truss Maple.jpg",
        "7973K-12_Old Mill Oak.jpg",
        "7975K-12_Raw Chestnut.jpg",
        "7976K-12_White Cypress.jpg",
        "7977K-12_White Barn.jpg",
        "7980K_18_Zebrawood.jpg",
        "7981K-12_Landmark Wood.jpg",
        "7982_8.jpg",
        "7983_8.jpg",
        "7984_8.jpg",
        "7985_8.jpg",
        "7986_8.jpg",
        "7987.jpg",
        "7988_8.jpg",
        "7989_8.jpg",
        "7990_8.jpg",
        "7991_8.jpg",
        "7992_8.jpg",
        "7993_8.jpg",
        "7994_8.jpg",
        "7995_8.jpg",
        "7996_11.jpg",
        "7997_8.jpg",
        "7998-low-line-full-sheet.jpg",
        "7999k-12-field-elm-full-sheet_1.jpg",
        "8200k-16-driftwood-full-sheet.jpg",
        "8201k-12-grey-elm-full-sheet_1.jpg",
        "8203k-28-silver-oak-ply-full-sheet.jpg",
        "8204k-16-weathered-char-full-sheet.jpg",
        "8205k-16-ebony-char-full-sheet_1_1.jpg",
        "8207k-16-branded-oak-full-sheet.jpg",
        "8208k-16-fawn-cypress-full-sheet.jpg",
        "8209k-28-veranda-teak-full-sheet.jpg",
        "8210k-28-portico-teak-full-sheet.jpg",
        "8211k-28-phantom-pearl-full-sheet.jpg",
        "8212k-28-phantom-ecru-full-sheet.jpg",
        "8213k-28-phantom-cocoa-full-sheet.jpg",
        "8214k-28-phantom-charcoal-full-sheet.jpg",
        "8215.jpg",
        "8216.jpg",
        "8217.jpg",
        "8218.jpg",
        "8219-38 Ivory Birch.jpg",
        "8220.jpg",
        "8221.jpg",
        "8222.jpg",
        "8225.jpg",
        "8226.jpg",
        "8229.jpg",
        "8231.jpg",
        "8232 Continential Walnut.jpg",
        "8239 Cenizo Cherry.jpg",
        "8241 Norwegian Ash.jpg",
        "8242 Jubilee Oak.jpg",
        "CC_5026K-21 Brazilian Grey 5x8.jpg",
        "D12K-18_Regimental Red.jpg",
        "D14.jpg",
        "D25.jpg",
        "D30-60_Natural Almond.jpg",
        "D307.jpg",
        "D315.jpg",
        "D321.jpg",
        "D327-60_Pepperdust.jpg",
        "D354 - Designer White.jpg",
        "D379.jpg",
        "D381.jpg",
        "D388.jpg",
        "D403.jpg",
        "D417.jpg",
        "D427-60_Linen.jpg",
        "D431.jpg",
        "D439.jpg",
        "D495-60_Coffee Bean.jpg",
        "D498_7.jpg",
        "D50-60_Khaki Brown.jpg",
        "D501_8.jpg",
        "D502_8.jpg",
        "D503.jpg",
        "D504.jpg",
        "D505.jpg",
        "D73.jpg",
        "D91-60_Slate Grey.jpg",
        "D92-60_Dove Grey.jpg",
        "D96.jpg",
        "cippolino-grigio-full-sheet.jpg",
        "north-sea-d90-full-sheet_1.jpg"
    ]

    function load() {
        onClickTexture("HPL/1595-60_Black.jpg")
        loadImages('/HPL', hplImages)
    }

    // adapted from: 
    // https://stackoverflow.com/questions/55268506/how-do-i-fetch-all-images-in-a-folder-with-ajax-using-pure-js/
    // not working on GitHub host :-(
    function loadImagesFromDirectory(dir, fileextension) {
        var xhr = new XMLHttpRequest();
        xhr.open("GET", dir, true);
        xhr.responseType = 'document';
        xhr.onload = () => {
            if (xhr.status === 200) {
                var elements = xhr.response.getElementsByTagName("a");
                for (x of elements) {
                    if (x.href.match(/\.(jpe?g|png|gif)$/)) {
                        let img = document.createElement("img");
                        img.src = x.href;
                        img.width = 40
                        img.height = 40
                        img.role = 'button'
                        var element = document.body.appendChild(img);
                        element.setAttribute("onclick", "onClickTexture('" + element.src + "')")
                    }
                };
            }
            else {
                alert('Request failed. Returned status of ' + xhr.status);
            }
        }
        xhr.send()
    }

    function loadImages(directory, imageNames) {
        for (imageName of imageNames) {
            let img = document.createElement("img")
            img.src = directory + '/' + imageName
            img.width = 40
            img.height = 40
            img.role = 'button'
            var element = document.body.appendChild(img);
            element.setAttribute("onclick", "onClickTexture('" + element.src + "')")
        }
    }

    function onClickTexture(imageName) {
        document.getElementById("clicked").innerText = imageName
        getBackgroundImage(imageName, function (image) {
            document.getElementById("texture").src = image.src
        })
    }

    function getBackgroundImage(imageName, onComplete) {
        loadImage("white.png", function (backgroundImage) {
            var textureCanvas = document.createElement("canvas")
            textureCanvas.id = "textureCanvas"
            textureCanvas.width = 2042
            textureCanvas.height = 502
            textureCanvas.hidden = true
            document.body.appendChild(textureCanvas)

            loadImage(imageName, function (textureImage) {
                var textureContext = textureCanvas.getContext("2d")
                textureContext.fillStyle = textureContext.createPattern(textureImage, "repeat");
                textureContext.fillRect(0, 0, textureCanvas.width, textureCanvas.height);
                textureContext.globalCompositeOperation = "multiply";
                textureContext.drawImage(backgroundImage, 0, 0, backgroundImage.width, backgroundImage.height);
                textureContext.globalCompositeOperation = "destination-in";
                textureContext.drawImage(backgroundImage, 0, 0, backgroundImage.width, backgroundImage.height);

                var image = new Image()
                image.src = textureCanvas.toDataURL()
                textureCanvas.remove()
                onComplete(image)
            })
        })
    }

    function loadImage(imageName, onComplete) {
        var image = new Image()
        image.onload = function () {
            onComplete(image)
        }
        image.src = imageName
    }
</script>